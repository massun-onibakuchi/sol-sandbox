# <h1 align="center"> sol-sandbox </h1>

> This repo is generated by [hardhat-foundry-template](https://github.com/massun-onibakuchi/hardhat-foundry-template/)

## Features

- [Halmos](https://github.com/a16z/halmos) Symbolic bounded model checker for Ethereum smart contracts
- [evm-run](https://github.com/zemse/evm-run) (Run EVM code from console or file, on local or mainnet fork)

## Getting Started

### Requirements

The following will need to be installed. Please follow the links and instructions.

- [Foundry](https://github.com/foundry-rs/foundry)
- Node >= 15
- yarn or npm >= 7
- Python >= 3.9 (if you use Halmos)

### Quickstart

1. Install dependencies

Once you've cloned and entered into your repository, you need to install the necessary dependencies. In order to do so, simply run:

```shell
yarn install
forge install
```

2. Build

```bash
forge build
```

3. Test

```bash
forge test -vvv
# or
npx hardhat test
```

For more information on how to use Foundry, check out the [Foundry Github Repository](https://github.com/foundry-rs/foundry/tree/master/forge) or type `forge help` in your terminal.

### Install Libraries

- Install libraries with Foundry which work with Hardhat.

```bash
forge install openzeppelin/openzeppelin-contracts # just an example
```

And then update remappings in `foundry.toml`.

```
remappings = [
    "@openzeppelin/=lib/openzeppelin-contracts/",
]
```

This will allow you to import libraries like this:

```solidity
// Instead of import "lib/openzeppelin-contracts/token/ERC20/ERC20.sol";
import '@openzeppelin/contracts/token/ERC20/ERC20.sol';
```

### Forge Commands

```bash
forge doc # generates and builds an mdbook from Solidity source files in ./docs
forge doc --serve # generates docs and serves them on localhost:3000
forge snapshot
forge coverage
```

### Cast Commands

- Use `cast` command which is a swiss army knife for smart contract development. Type `cast --help` for more information.

#### Tracing a tx

Runs a published transaction in a local environment and prints the trace.

```bash
cast run <txhash> --rpc-url <rpc-url>
```

### Deplyment

See [deployment](./deployment.md)

### GitHub Actions

- [CI](.github/workflows/ci.yml)
- [Static Analyzer](.github/workflows/slither.yml) ([Slither](https://github.com/crytic/slither))
  - To enable the upload of the SARIF file to GitHub, Requires to be public repo or GitHub Enterprise Cloud user.

## Resources

For more infomation on how to use Foundry features, refer to:

- [forge-std](https://github.com/foundry-rs/forge-std/)
- [cheat codes](https://github.com/foundry-rs/foundry/blob/master/forge/README.md#cheat-codes)
- [Foundry book](https://book.getfoundry.sh/)
